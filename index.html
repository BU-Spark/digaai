<!DOCTYPE html>
<!-- saved from url=(0058)https://newsignature.github.io/us-map/#usage-style-options -->
<html class="js no-flexbox canvas canvastext webgl touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths gr__newsignature_github_io" lang="en"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  

  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>Digaii - </title>
  <meta name="description" content="">

  <!-- Mobile viewport optimized: h5bp.com/viewport -->
  <meta name="viewport" content="width=device-width">

  <!-- Place favicon.ico and apple-touch-icon.png in the root directory: mathiasbynens.be/notes/touch-icons -->



<body data-gr-c-s-loaded="true">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="css/style2.css" />



<div id="navbar" class="navbar">
    <div id="dropdown" class="dropdown">
        <button class="dropbtn" onclick="dropDown()"> Features
            <i class="fa fa-caret-down"></i>
        </button>
        <div class="dropdown-content" id="selectFeature">
        </div>
    </div> 
</div>
<div class="window">
    <svg id="map" width="960" height="600"></svg>
    <div class="chart">
        <svg id="bar" width="480" height = "300"></svg>
        <svg id="pie" width="480" height = "350"></svg>
    </div>
</div>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<script src="https://d3js.org/topojson.v2.min.js"></script>


<script src="https://d3js.org/d3.v4.min.js"></script>

</script><script src="./js/variables.js"></script>   

  <header id="overview" class="overview">
    <div class="container-fluid">
      <div class="row-fluid clearfix">
  
  <div role="main" class="container-fluid multiarticles">
    <article id="demo">
      <header class="page-header">
	  <h1>Demo for Digaii</h1>
	  <h2><small>Click on the state to see the result</small></h2>
	  </header>
        <div class="row-fluid">
          <div class="span6">
            <div class="example">
              <div class="results">
                <h5>Results</h5>
                <div id="clicked-state">Click on a state</div></div>
              <div class="map" id="map"><svg height="0" version="1.1" width="0" xmlns="http://www.w3.org/2000/svg"
			  style="overflow: hidden; position: relative; top: 0.75px;" viewBox="0 0 1030 630" preserveAspectRatio="xMinYMin">
			  </div>
          </div>
        </div>
    </article>
  <!-- JavaScript at the bottom for fast page loading -->

  <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
  <script src="./js/jquery.min.js.download"></script>
  <script>window.jQuery</script>

  <!-- scripts concatenated and minified via build script -->
  <script src="./js/bootstrap.js.download"></script>
  <script src="./js/raphael.js.download"></script>
  <script src="./js/jquery.usmap.js.download"></script>
  <script>
    var all_data = null;
	
	d3.csv("http://aaell.me/resources/all_data.csv", function(data) {
	  all_data = data;
	  console.log(data[0]);
	  dataReady(all_data);
	  showBarChart();
	});

    function dataReady(data) {
		chartData = dataPreprocess(data);
	}

    var currState = 'OK';
	var chartData = null;
    $('body').scrollspy({offset: $('#nav').outerHeight()+10, target: '#nav'})
    $('body')
      .on('click', 'a', function(event) {
        var link = $(event.target);
        var toElement = $(link.attr('href'));
        if(toElement.length) {
          var top = toElement.offset().top - $('#nav').outerHeight();
          $('html, body').animate({scrollTop: top}, 1000);
        }
      });
	  
	  
	function showBarChart() {
		// clean last output
		barSvg.select("g").remove();

		if(currGroup === "population") return;

		data = getGroup(chartData, currGroup);

		x = d3.scaleBand().rangeRound([0, barWidth]).padding(0.1),
		y = d3.scaleLinear().rangeRound([barHeight, 0]);

		x.domain(data.map(d => d[""]));
		y.domain([0, columnMax(data, currState)]);

		let g = barSvg.append("g")
						.attr("transform", "translate(" + barMargin.left + "," + barMargin.top + ")");

		g.append("g")
			.attr("transform", "translate(0," + barHeight + ")")
			.call(d3.axisBottom(x))
			.selectAll("text")
			.attr("y", 0)
			.attr("x", 9)
			.attr("dy", ".35em")
			.attr("transform", "rotate(90)")
			.style("text-anchor", "start");

		g.append("g")
			.call(d3.axisLeft(y))
			.append("text")
			.attr("transform", "rotate(-90)")
			.attr("y", 6)
			.attr("dy", "0.71em")
			.attr("text-anchor", "end")
			.text("Frequency");

		g.selectAll(".bar")
			.data(data)
			.enter().append("rect")
			.attr("class", "bar")
			.attr("x", d => x(d[""]))
			.attr("y", d => y(d[currState]))
			.attr("width", x.bandwidth())
			.attr("height", d => barHeight - y(d[currState]))
			.on("click", clickFeature)
			.on("mouseover", barTip.show)
			.on("mouseout", barTip.hide);
	}
	  
	  
    function dataPreprocess(data) {
		rst = {};
		for(i = 0; i < data.length; ++i) {
			for(var k in data[i]) {
				if(k) {
					numStr = data[i][k].replace(/[,$ ]/g, '');
					data[i][k] = parseFloat(numStr);
				} 
			}
		}
		return data;
	}
      
        
    $('#map').usmap({
      'stateStyles': {
        fill: "#4ECDC4",
        stroke: "#41A59B",
        "stroke-width": 1,
        "stroke-linejoin": "round",
        scale: [1, 1]
      },
      'stateHoverStyles': {
        fill: "#C7F464",
        stroke: "#ADCC56",
        scale: [1.1, 1.1]
      },
      'labelBackingStyles': {
        fill: "#4ECDC4",
        stroke: "#41A59B",
        "stroke-width": 1,
        "stroke-linejoin": "round",
        scale: [1, 1]
      },
      
      // The styles for the hover
      'labelBackingHoverStyles': {
        fill: "#C7F464",
        stroke: "#ADCC56",
      },
      'labelTextStyles': {
      fill: "#222",
        'stroke': 'none',
        'font-weight': 300,
        'stroke-width': 0,
        'font-size': '10px'
      },
      click: function(event, data) {
		currState = data.name;
        $('#clicked-state').text('You clicked: '+currState+' AND '+currGroup);
		showBarChart();

      }
    });
  </script>
</body>

