<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Resume - Start Bootstrap Theme</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:100,200,300,400,500,600,700,800,900" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i" rel="stylesheet">
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="vendor/devicons/css/devicons.min.css" rel="stylesheet">
    <link href="vendor/simple-line-icons/css/simple-line-icons.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/resume.min.css" rel="stylesheet">
    <link href="css/styleGraph.css" rel="stylesheet">

  </head>

  <body id="page-top">

    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
      <a class="navbar-brand js-scroll-trigger" href="#page-top">
        <span class="d-block d-lg-none">Start Bootstrap</span>
        <span class="d-none d-lg-block">
          <img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="img/profile.jpg" alt="">
        </span>
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#about">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#experience">Experience</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#education">Education</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#skills">Skills</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#interests">Interests</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#awards">Awards</a>
          </li>
        </ul>
      </div>
    </nav>

    <div class="container-fluid p-0">

      <section class="resume-section p-3 p-lg-5 d-flex d-column" id="about">
        <div class="window">
			<div class="chart">
				<svg id="bar" width="480" height = "300"></svg>
				<svg id="pie" width="480" height = "350"></svg>
			</div>
		</div>
      </section>

      <section class="resume-section p-3 p-lg-5 d-flex flex-column" id="experience">
		<div class="window">
			<svg id="map" width="960" height="600"></svg>
		</div>


      </section>

      <section class="resume-section p-3 p-lg-5 d-flex flex-column" id="education">
        <div class="my-auto">
          <h2 class="mb-5">Education</h2>

          <div class="resume-item d-flex flex-column flex-md-row mb-5">
            <div class="resume-content mr-auto">
              <h3 class="mb-0">University of Colorado Boulder</h3>
              <div class="subheading mb-3">Bachelor of Science</div>
              <div>Computer Science - Web Development Track</div>
              <p>GPA: 3.23</p>
            </div>
            <div class="resume-date text-md-right">
              <span class="text-primary">August 2006 - May 2010</span>
            </div>
          </div>

          <div class="resume-item d-flex flex-column flex-md-row">
            <div class="resume-content mr-auto">
              <h3 class="mb-0">James Buchanan High School</h3>
              <div class="subheading mb-3">Technology Magnet Program</div>
              <p>GPA: 3.56</p>
            </div>
            <div class="resume-date text-md-right">
              <span class="text-primary">August 2002 - May 2006</span>
            </div>
          </div>

        </div>
      </section>

      <section class="resume-section p-3 p-lg-5 d-flex flex-column" id="skills">
        <div class="my-auto">
          <h2 class="mb-5">Skills</h2>

          <div class="subheading mb-3">Programming Languages &amp; Tools</div>
          <ul class="list-inline list-icons">
            <li class="list-inline-item">
              <i class="devicons devicons-html5"></i>
            </li>
            <li class="list-inline-item">
              <i class="devicons devicons-css3"></i>
            </li>
            <li class="list-inline-item">
              <i class="devicons devicons-javascript"></i>
            </li>
            <li class="list-inline-item">
              <i class="devicons devicons-jquery"></i>
            </li>
            <li class="list-inline-item">
              <i class="devicons devicons-sass"></i>
            </li>
            <li class="list-inline-item">
              <i class="devicons devicons-less"></i>
            </li>
            <li class="list-inline-item">
              <i class="devicons devicons-bootstrap"></i>
            </li>
            <li class="list-inline-item">
              <i class="devicons devicons-wordpress"></i>
            </li>
            <li class="list-inline-item">
              <i class="devicons devicons-grunt"></i>
            </li>
            <li class="list-inline-item">
              <i class="devicons devicons-gulp"></i>
            </li>
            <li class="list-inline-item">
              <i class="devicons devicons-npm"></i>
            </li>
          </ul>

          <div class="subheading mb-3">Workflow</div>
          <ul class="fa-ul mb-0">
            <li>
              <i class="fa-li fa fa-check"></i>
              Mobile-First, Responsive Design</li>
            <li>
              <i class="fa-li fa fa-check"></i>
              Cross Browser Testing &amp; Debugging</li>
            <li>
              <i class="fa-li fa fa-check"></i>
              Cross Functional Teams</li>
            <li>
              <i class="fa-li fa fa-check"></i>
              Agile Development &amp; Scrum</li>
          </ul>
        </div>
      </section>

      <section class="resume-section p-3 p-lg-5 d-flex flex-column" id="interests">
        <div class="my-auto">
          <h2 class="mb-5">Interests</h2>
          <p>Apart from being a web developer, I enjoy most of my time being outdoors. In the winter, I am an avid skiier and novice ice climber. During the warmer months here in Colorado, I enjoy mountain biking, free climbing, and kayaking.</p>
          <p class="mb-0">When forced indoors, I follow a number of sci-fi and fantasy genre movies and television shows, I am an aspiring chef, and I spend a large amount of my free time exploring the latest technolgy advancements in the front-end web development world.</p>
        </div>
      </section>

      <section class="resume-section p-3 p-lg-5 d-flex flex-column" id="awards">
        <div class="my-auto">
          <h2 class="mb-5">Awards &amp; Certifications</h2>
          <ul class="fa-ul mb-0">
            <li>
              <i class="fa-li fa fa-trophy text-warning"></i>
              Google Analytics Certified Developer</li>
            <li>
              <i class="fa-li fa fa-trophy text-warning"></i>
              Mobile Web Specialist - Google Certification</li>
            <li>
              <i class="fa-li fa fa-trophy text-warning"></i>
              1<sup>st</sup>
              Place - University of Colorado Boulder - Emerging Tech Competition 2009</li>
            <li>
              <i class="fa-li fa fa-trophy text-warning"></i>
              1<sup>st</sup>
              Place - University of Colorado Boulder - Adobe Creative Jam 2008 (UI Design Category)</li>
            <li>
              <i class="fa-li fa fa-trophy text-warning"></i>
              2<sup>nd</sup>
              Place - University of Colorado Boulder - Emerging Tech Competition 2008</li>
            <li>
            <li>
              <i class="fa-li fa fa-trophy text-warning"></i>
              1<sup>st</sup>
              Place - James Buchanan High School - Hackathon 2006</li>
            <li>
              <i class="fa-li fa fa-trophy text-warning"></i>
              3<sup>rd</sup>
              Place - James Buchanan High School - Hackathon 2005</li>
          </ul>
        </div>
      </section>

    </div>

	
	
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
	<script src="https://d3js.org/topojson.v2.min.js"></script>
	<script src="js/d3-tip.js"></script>

	<script>
	// variables
	var mapData = null,
		chartData = null

	var currFeature = 0;
	var currState = "01";
	var currGroup = "age detail";

	var mapSvg = d3.select("#map"),
		mapPath = d3.geoPath(),
		mapColor = null;

	var barSvg = d3.select("#bar"),
		barMargin = {top: 20, right: 50, bottom: 100, left: 100},
		barWidth = +barSvg.attr("width") - barMargin.left - barMargin.right,
		barHeight = +barSvg.attr("height") - barMargin.top - barMargin.bottom;

	var pieSvg = d3.select("#pie"),
		pieMargin = {top: 0, right: 0, bottom: 100, left: 0},
		pieWidth = +pieSvg.attr("width") - pieMargin.left - pieMargin.right,
		pieHeight = +pieSvg.attr("height") - pieMargin.top - pieMargin.bottom,
		pieRadius = Math.min(pieWidth, pieHeight) / 2;

	var groups = ["population", "age detail", "age summary", "gender", "marriage", "citizen", 
				  "enter time", "education", "civilian labor force", "unemployed", "employment type",
				  "employment by industry", "employment by occupation", "income" ];

	var mapTip = d3.tip()
					.attr("class", "tip")
					.offset([-8, 0])
					.html(d => chartData[currFeature][""] + " : " + chartData[currFeature][d.id]);

	var barTip = d3.tip()
					.attr("class", "tip")
					.offset([-8, 0])
					.html(d => d[""] + " : " + d[currState]);

	var pieTip = d3.tip()
					.attr("class", "tip")
					.offset([-8, 0])
					.html(d => d.data[""] + " : " + d.data[currState]);

	mapSvg.call(mapTip);
	barSvg.call(barTip);
	pieSvg.call(pieTip);

	function getGroup(data, group, changeFeature = false) {
		start = 0;
		end = 0;
		switch(group) {
			case "population": start = 0; end = 1;
				break;
			case "age detail": start = 1; end = 19;
				break;
			case "age summary": start = 19; end = 23;
				break;
			case "gender": start = 23; end = 25;
				break;
			case "marriage": start = 25; end = 30;
				break;
			case "citizen": start = 30; end = 32;
				break;
			case "enter time": start = 32; end = 34;
				break;
			case "education": start = 34; end = 37;
				break;
			case "civilian labor force": start = 37; end = 39;
				break;
			case "unemployed": start = 39; end = 41;
				break;
			case "employment type": start = 41; end = 45;
				break;
			case "employment by industry": start = 45; end = 52;
				break;
			case "employment by occupation": start = 52; end = 60;
				break;
			case "income": start = 60; end = 63;
				break;
		}
		if(changeFeature)
			currFeature = d3.min([d3.max([start, currFeature]), end - 1]);

		return data.slice(start, end);
	}

	// util functions 
	function rowSum(data) {
		s = 0;
		for(var k in data) {
			if(k) {
				v = data[k];
				s = s+v/5;
			}
		}
		return s;
	}

	function columnMax(group, state) {
		m = -Infinity;
		for(i = 0; i < group.length; ++i) {
			v = group[i][state];
			if(m < v) m = v;
		}
		return m;
	}

	function dataPreprocess(data) {
		rst = {};
		for(i = 0; i < data.length; ++i) {
			for(var k in data[i]) {
				if(k) {
					numStr = data[i][k].replace(/[,$ ]/g, '');
					data[i][k] = parseFloat(numStr);
				} 
			}
		}
		return data;
	}

	function stateMapColor(d) {
		c = chartData[currFeature][d.id]
		return mapColor(c);
	}

	//load data
	d3.queue()
		.defer(d3.json, "https://d3js.org/us-10m.v1.json")
		.defer(d3.csv, "http://aaell.me/resources/all_data.csv")
		.await(dataReady);

	// callbacks
	function mouseOver(d, i) {
		mapTip.show(d, i);
		currState = d.id;
		showBarChart();
		showPieChart();
	}

	function dataReady(error, us, data) {
		if (error) throw error;
		mapData = us;
		chartData = dataPreprocess(data);
		showMap();
	}

	function clickFeature(d, i) {
		chartData.forEach((e, i) => {
			if(e[""] == d[""]) currFeature = i;
		});
		showMap();
	}

	function clickPie(d, i) {
		clickFeature(d.data, i);
	}

	function showMap() {
		mapSvg.selectAll("g").remove();
		mapSvg.selectAll("path").remove();
		mapColor = null;

		color = d3.scaleLinear()
					.domain([0, rowSum(chartData[currFeature])])
					.range(['#c6dbef', '#2d0894']);
		mapColor = (d) => { 
			return color(chartData[currFeature][d.id])
		};

		mapSvg.append("g")
				.attr("class", "state-inner")
				.selectAll("path")
				.data(topojson.feature(mapData, mapData.objects.states).features)
				.enter().append("path")
				.attr("fill", d => mapColor(d))
				.attr("d", mapPath)
				.on("mouseover", mouseOver)
				.on("mouseleave", mapTip.hide);

		mapSvg.append("path")
				.datum(topojson.mesh(mapData, mapData.objects.states, (a, b) => a !== b))
				.attr("class", "states")
				.attr("d", mapPath);
	}

	function showBarChart() {
		// clean last output
		barSvg.select("g").remove();

		if(currGroup === "population") return;

		data = getGroup(chartData, currGroup);

		x = d3.scaleBand().rangeRound([0, barWidth]).padding(0.1),
		y = d3.scaleLinear().rangeRound([barHeight, 0]);

		x.domain(data.map(d => d[""]));
		y.domain([0, columnMax(data, currState)]);

		let g = barSvg.append("g")
						.attr("transform", "translate(" + barMargin.left + "," + barMargin.top + ")");

		g.append("g")
			.attr("transform", "translate(0," + barHeight + ")")
			.call(d3.axisBottom(x))
			.selectAll("text")
			.attr("y", 0)
			.attr("x", 9)
			.attr("dy", ".35em")
			.attr("transform", "rotate(90)")
			.style("text-anchor", "start");

		g.append("g")
			.call(d3.axisLeft(y))
			.append("text")
			.attr("transform", "rotate(-90)")
			.attr("y", 6)
			.attr("dy", "0.71em")
			.attr("text-anchor", "end")
			.text("Frequency");

		g.selectAll(".bar")
			.data(data)
			.enter().append("rect")
			.attr("class", "bar")
			.attr("x", d => x(d[""]))
			.attr("y", d => y(d[currState]))
			.attr("width", x.bandwidth())
			.attr("height", d => barHeight - y(d[currState]))
			.on("click", clickFeature)
			.on("mouseover", barTip.show)
			.on("mouseout", barTip.hide);
	}

	function showPieChart() {
		// clean last output
		pieSvg.selectAll("g").remove();
		
		if(currGroup === "population") return;

		data = getGroup(chartData, currGroup);

		g = pieSvg.append("g").attr("transform", "translate(" + pieWidth / 2 + "," + pieHeight / 2 + ")"),
		pieColor = d3.scaleOrdinal(d3.schemeCategory20c);

		pie = d3.pie()
				.sort(null)
				.value(d => d[currState]);
		
		piePath = d3.arc()
					.outerRadius(pieRadius - 10)
					.innerRadius(0);


		arc = g.selectAll(".arc")
					.data(pie(data))
					.enter().append("g")
					.attr("class", "arc");

		arc.append("path")
			.attr("d", piePath)
			.attr("fill", d => pieColor(d.data[""]))
			.on("click", clickPie)
			.on("mouseover", pieTip.show)
			.on("mouseout", pieTip.hide);
		
		wid = data.length * 12;
		x = d3.scaleBand().rangeRound([0, wid]).padding(0.1);
		x.domain(data.map(d => d[""]));

		barSize = x.bandwidth();
		g = g.append("g").attr("transform", "translate(" + -pieWidth / 4 + "," + pieHeight / 2 + ")")
		g.selectAll(".bar")
			.data(data)
			.enter().append("rect")
			.attr("x", d => x(d[""]))
			.attr("y", 6)
			.attr("width", barSize)
			.attr("height", barSize)
			.attr("fill", d => pieColor(d[""]));
		
		g.append("g")
			.attr("class", "pie-axis")
			.call(d3.axisBottom(x))
			.selectAll("text")
			.attr("y", -barSize / 2)
			.attr("x", 10 + barSize)
			.attr("transform", "rotate(90)")
			.style("text-anchor", "start");
	}

	//UI function
	function dropDown() {
		dropDownEle = d3.select("#selectFeature");
		if(dropDownEle.classed("show")) {
			dropDownEle.classed("show", false);
		} else {
			dropDownEle.classed("show", true);
			dropDownEle.selectAll("a")
						.data(groups)
						.enter().append("a")
						.text(d => d)
						.attr("href", "#")
						.on("click", clickFeatureGroup);
		}
	}


	function clickFeatureGroup(d, i) {
		dropDownEle = d3.select("#selectFeature");
		dropDownEle.classed("show", false);
		currGroup = d;
		getGroup(chartData, d, true);
		showMap();
		showBarChart();
		showPieChart();
	}
	</script>

	
	
	
    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/resume.min.js"></script>

  </body>

</html>
